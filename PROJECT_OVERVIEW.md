# プロジェクト概要

## 📌 プロジェクト名

**Clash Royale Analytics Platform (クラロワ解析プラットフォーム)**

## 🎯 目的

Clash Royaleプレイヤーのバトルデータを解析し、戦績やデッキの傾向、勝率などの詳細なレポートを提供することで、プレイヤーのスキル向上を支援する。

## 👥 ターゲットユーザー

- Clash Royaleの競技プレイヤー
- 自分の戦績を詳しく分析したいプレイヤー
- クランメンバーの戦績を管理したいリーダー
- 多言語対応により、日本、アメリカ、ヨーロッパなど世界中のプレイヤー

## 🎨 主要機能

### 1. ユーザー設定機能

**目的**: Clash Royale APIからプレイヤーを検索し、プラットフォームに登録する

**機能詳細**:
- プレイヤータグによる検索
- プレイヤー情報の表示(名前、レベル、トロフィー数など)
- 複数プレイヤーの登録・管理
- プレイヤー情報の自動更新

**画面**:
- ユーザー検索画面
- ユーザー詳細画面
- ユーザー一覧画面

**Clash Royale API エンドポイント**:
```
GET /v1/players/{playerTag}
```

### 2. 試合データ解析機能(メイン機能)

**目的**: バトルログを取得し、多角的な分析を行う

**機能詳細**:

#### 2.1 データ取得
- 最新25試合のバトルログ取得
- 試合データの構造化保存
- 定期的なデータ更新(cron/scheduler)

#### 2.2 解析項目
- **基本統計**
  - 総試合数
  - 勝率(全体、期間別)
  - 平均トロフィー変動
  - 連勝/連敗記録

- **デッキ分析**
  - 使用デッキの頻度
  - デッキ別勝率
  - カード使用率
  - 人気カード組み合わせ

- **対戦相手分析**
  - 対戦相手のトロフィー帯分布
  - よく当たるデッキタイプ
  - 相性の良い/悪いデッキ

- **時系列分析**
  - 日別/週別/月別の勝率推移
  - トロフィー推移グラフ
  - プレイ時間帯分析

- **詳細統計**
  - アリーナ別成績
  - ゲームモード別成績
  - クラウン獲得数
  - エリクサー効率

**Clash Royale API エンドポイント**:
```
GET /v1/players/{playerTag}/battlelog
GET /v1/cards (カード情報の参照用)
```

### 3. レポート保存・表示機能

**目的**: 解析結果をデータベースに保存し、視覚的に表示する

**機能詳細**:

#### 3.1 レポート生成
- 日次レポート自動生成
- カスタム期間レポート作成
- レポートのPDF/画像エクスポート(将来的)

#### 3.2 データ保存
- 全バトルログの保存
- 解析結果の保存
- 履歴データの保持

#### 3.3 レポート表示
- ダッシュボード(サマリー表示)
- 詳細統計ページ
- グラフ・チャート表示
  - 勝率推移グラフ
  - デッキ使用率円グラフ
  - トロフィー推移折れ線グラフ

**表示技術**:
- Chart.js / ApexCharts (検討中)
- Bootstrap / Tailwind CSS

## 🌐 多言語化要件

### 対応言語(優先順)
1. 日本語(ja)
2. 英語(en)
3. スペイン語(es) - 将来的
4. ドイツ語(de) - 将来的
5. フランス語(fr) - 将来的

### 多言語化対象
- UIテキスト(ボタン、ラベル、メッセージ)
- エラーメッセージ
- レポート内の説明文
- メールテンプレート

### 実装方法
- Laravelの多言語化機能(`resources/lang/`)
- フロントエンドも同様に対応
- ユーザー設定で言語切り替え可能
- ブラウザ言語の自動検出

## 🔐 セキュリティ要件

- Clash Royale APIトークンの安全な管理
- プレイヤータグの検証
- レート制限(API呼び出し頻度)
- CSRF保護
- XSS対策
- SQL injection対策(Eloquent ORM使用)

## 📊 パフォーマンス要件

- APIレスポンス時間: 2秒以内
- ダッシュボード読み込み: 3秒以内
- 同時接続ユーザー数: 100人以上(目標)
- データキャッシュの活用

## 🚀 将来的な拡張機能(Phase 2)

- クラン全体の分析
- プレイヤー同士の比較機能
- AIによる戦略提案
- リアルタイム通知
- ソーシャル機能(コメント、シェア)
- モバイルアプリ

## 📈 成功指標(KPI)

- 登録ユーザー数
- 1日あたりのアクティブユーザー数
- レポート生成回数
- ユーザー継続率

## 🗓 開発スケジュール(想定)

### Phase 1: MVP開発(2-3ヶ月)
- Week 1-2: 環境構築、DB設計
- Week 3-4: ユーザー設定機能
- Week 5-8: 試合データ解析機能(基本)
- Week 9-10: レポート表示機能
- Week 11-12: 多言語化、テスト、デプロイ

### Phase 2: 機能拡張(3-6ヶ月後)
- 詳細分析機能の追加
- UI/UXの改善
- パフォーマンス最適化

## 📚 参考リソース

- Clash Royale API Documentation: https://developer.clashroyale.com/
- Laravel Documentation: https://laravel.com/docs
- RoyaleAPI (参考サイト): https://royaleapi.com/

---

**最終更新**: 2026-01-06
